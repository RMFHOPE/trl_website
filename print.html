<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>RMF Systems Engineering Handbook</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">RMF Systems Engineering Handbook</a></li><li class="chapter-item expanded "><a href="headers/project-outline.html"><strong aria-hidden="true">1.</strong> Project Outline</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/overall-architecture.html"><strong aria-hidden="true">1.1.</strong> Overall Architecture</a></li><li class="chapter-item expanded "><a href="content/current-status.html"><strong aria-hidden="true">1.2.</strong> Current Status & Timeline</a></li><li class="chapter-item expanded "><a href="content/our-partners-and-contributors.html"><strong aria-hidden="true">1.3.</strong> Partners and Contributors</a></li></ol></li><li class="chapter-item expanded "><a href="headers/design-efforts.html"><strong aria-hidden="true">2.</strong> Design Efforts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/roles-responsibilities.html"><strong aria-hidden="true">2.1.</strong> Identified Roles & Responsibilities</a></li></ol></li><li class="chapter-item expanded "><a href="headers/approach-development.html"><strong aria-hidden="true">3.</strong> Approach to Development</a></li><li class="chapter-item expanded "><a href="headers/identified-hazards.html"><strong aria-hidden="true">4.</strong> Risk Assessment & Identified Hazards</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/terms-of-references.html"><strong aria-hidden="true">4.1.</strong> Terms of Reference</a></li></ol></li><li class="chapter-item expanded "><a href="headers/risk-assessment.html"><strong aria-hidden="true">5.</strong> Approach to Functional Safety</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/platform-standards.html"><strong aria-hidden="true">5.1.</strong> Platform & Operational Safety Standards</a></li><li class="chapter-item expanded "><a href="content/amr-standards.html"><strong aria-hidden="true">5.2.</strong> AMR Design and Safety Considerations</a></li></ol></li><li class="chapter-item expanded "><a href="headers/software-systems-safety.html"><strong aria-hidden="true">6.</strong> Approach to Software Systems Safety</a></li><li class="chapter-item expanded "><a href="headers/software-qa.html"><strong aria-hidden="true">7.</strong> Approach to Software Quality Assurance</a></li><li class="chapter-item expanded "><a href="headers/verification-validation.html"><strong aria-hidden="true">8.</strong> Approach to Verification and Validation - RMF Scheduler</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/simulation.html"><strong aria-hidden="true">8.1.</strong> Gazebo SIL of TRL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/basic-tests.html"><strong aria-hidden="true">8.1.1.</strong> Basic Tests</a></li><li class="chapter-item expanded "><a href="content/standalone-tests.html"><strong aria-hidden="true">8.1.2.</strong> Standalone Tests</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="headers/systems-test-plan.html"><strong aria-hidden="true">9.</strong> Systems Test Plan</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/baseline-0.html"><strong aria-hidden="true">9.1.</strong> Baseline 0 - Static Lift Rig Tests</a></li><li class="chapter-item expanded "><a href="content/baseline-1.html"><strong aria-hidden="true">9.2.</strong> Baseline 1 - BMS Tests</a></li><li class="chapter-item expanded "><a href="content/baseline-2.html"><strong aria-hidden="true">9.3.</strong> Baseline 2 - BMS & AMR Centric Tests</a></li><li class="chapter-item expanded "><a href="content/baseline-final.html"><strong aria-hidden="true">9.4.</strong> Final Baseline - Accelerated Testing & Corner Cases</a></li></ol></li><li class="chapter-item expanded "><a href="headers/annex.html"><strong aria-hidden="true">10.</strong> Annex</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/design-docs.html"><strong aria-hidden="true">10.1.</strong> Design Documents</a></li><li class="chapter-item expanded "><a href="content/amr-people.html"><strong aria-hidden="true">10.2.</strong> AMR To People Interaction</a></li><li class="chapter-item expanded "><a href="content/amr-building.html"><strong aria-hidden="true">10.3.</strong> AMR To Building Interaction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/lift-integration.html"><strong aria-hidden="true">10.3.1.</strong> Lift Integration</a></li><li class="chapter-item expanded "><a href="content/door-integration.html"><strong aria-hidden="true">10.3.2.</strong> Door Integration</a></li><li class="chapter-item expanded "><a href="content/mapping.html"><strong aria-hidden="true">10.3.3.</strong> Mapping & Traffic Editor Concerns</a></li></ol></li><li class="chapter-item expanded "><a href="content/cybersecurity.html"><strong aria-hidden="true">10.4.</strong> Cybersecurity</a></li><li class="chapter-item expanded "><a href="content/emergency-behaviors.html"><strong aria-hidden="true">10.5.</strong> Emergency Requirements & Behaviours</a></li><li class="chapter-item expanded "><a href="content/sis.html"><strong aria-hidden="true">10.6.</strong> Safety Instrumented System</a></li><li class="chapter-item expanded "><a href="content/wireless-charger.html"><strong aria-hidden="true">10.7.</strong> Universal Wireless Charging</a></li><li class="chapter-item expanded "><a href="content/wiring-diagram.html"><strong aria-hidden="true">10.8.</strong> ICD of ethernet wiring at TRL</a></li><li class="chapter-item expanded "><a href="content/parasoft-setup.html"><strong aria-hidden="true">10.9.</strong> Parasoft setup of RMF</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/parasoft-outputs.html"><strong aria-hidden="true">10.9.1.</strong> Parasoft Outputs of RMF Modules</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="headers/faq.html"><strong aria-hidden="true">11.</strong> Frequently Asked Questions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">RMF Systems Engineering Handbook</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rmf-systems-engineering-handbook"><a class="header" href="#rmf-systems-engineering-handbook">RMF Systems Engineering Handbook</a></h1>
<p>1st July 2022</p>
<h2 id="what-is-the-rmftrl-project-about"><a class="header" href="#what-is-the-rmftrl-project-about">What is the RMF@TRL project about?</a></h2>
<p>In the course of building the <a href="https://osrf.github.io/ros2multirobotbook/intro.html">RMF</a>, the team observed many questions being asked 
(by Government agencies, end users, AMR vendors and developers), about RMF's </p>
<ul>
<li>Safety &amp; reliability</li>
<li>Operational concerns </li>
<li>Policy and regulations.</li>
</ul>
<p>To address these concerns, Singapore's <a href="https://www.sgdi.gov.sg/ministries/pmo/departments/stppo">S&amp;TPPO</a> and <a href="https://www.smartnation.gov.sg/about-smart-nation/sndgg">SNDGG</a>
have put together a pilot project centered on <a href="https://www.nlb.gov.sg/">National Library Board's</a> premises at 
<a href="https://www.nlb.gov.sg/VisitUs/BranchDetails/tabid/140/bid/335/Default.aspx?branch=Tampines+Regional+Library">Tampines Regional</a></p>
<p>The project team (in collaboration with OSRF Singapore) will be taking a <em>test centric</em> approach in our development &amp; deployment of RMF at TRL, to collect real world data to evaluate these issues.</p>
<h2 id="motivations-for-rmf-systems-engineering-handbook"><a class="header" href="#motivations-for-rmf-systems-engineering-handbook">Motivations for RMF Systems Engineering Handbook</a></h2>
<p>At higher levels of consideration (from a systems engineering standpoint), we note the following trends for ROS usage:</p>
<ul>
<li>ROS1 has been massively successful as an open source effort amongst the academic community
<ul>
<li>Promoting reuse of robotics developments across students, researchers and developers</li>
<li>High rates of adoption across robotics community, particularly in promoting the ROS standard message libraries for interoperability</li>
</ul>
</li>
<li>ROS2 has been steadily gaining traction with automotive components suppliers ie: <a href="https://www.apex.ai/">Apex.AI</a>
<ul>
<li>Noted ROS1 has reached end of life (noetic)</li>
<li>ROS2 is supposed to champion <em>both</em> open source efforts <em>and</em> commercially ready packages (ie: ROS2 RMWs)</li>
</ul>
</li>
</ul>
<p>Key outcome we want to arrive at, is a <em>operational</em> (safe, functional and reliable) RMF system. 
Thus to bridge the divide from ROS1/ROS2 towards an operational outcome, is not just &quot;software&quot; issues.</p>
<p>There are orthogonal considerations, (ie: systems engineering concerns), that need to be addressed:</p>
<ul>
<li>Risk assessments and hazards analysis</li>
<li>Quality assurance &amp; quality control issues (ie: Patform hardware and software, operational safety)</li>
<li>Platform safety and operational standards</li>
<li>Design documentations and traceability</li>
<li>Qualifications plans and system test/comissioning plans</li>
</ul>
<p>We note also, that where previously AMRs were installed and comissioned &quot;end to end&quot; by a single Robotics Systems Integrator, 
RMF is designed to decouple the &quot;end to end&quot; responsibility, into the following roles:</p>
<ul>
<li>Building management systems </li>
<li>Core logic (govening traffic control)</li>
<li>AMR fleets ( &gt; 1 brand)</li>
</ul>
<p>This allows for multi-fleet interoperability</p>
<blockquote>
<p>&quot;The camel, was a horse, but designed by a committee...&quot; <br> - Sir Alec Issigonis, designer of the Morris Mini, 1959</p>
</blockquote>
<p>So it turns out, these are rather contentious issues, where answers are needed.
After several months of study, the project team has outlined an approach that we think strikes the best balance of the following factors:</p>
<ul>
<li>Cost</li>
<li>Complexity</li>
<li>Performance</li>
<li>Interoperability</li>
</ul>
<blockquote>
<p>Insert diagram of &quot;Platform -&gt; Qualifications -&gt; Operations&quot; here</p>
</blockquote>
<p>For this to work however, we will be sharing both our approach (in this guide book) and the data that we have collected, for peer review process. Thus we need the </p>
<p>Do email us your questions and observations, that we can refine this <em>live</em> systems engineering process, so that we can create a new kind of cyber-physical network where
robots can roam freely across interlinked premises!</p>
<p>Thanks and best regards,<br />
<br> <br> <br> <br> <br> <br></p>
<p>Chong Teng Sheng<br />
Project Sponsor, S&amp;TPPO<br />
<a href="mailto:chong_teng_sheng@pmo.gov.sg">chong_teng_sheng@pmo.gov.sg</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="project-outline"><a class="header" href="#project-outline">Project Outline</a></h1>
<p><img src="headers/../images/objectives.png" alt="Project Outline" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overall-architecture"><a class="header" href="#overall-architecture">Overall Architecture</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="current-status"><a class="header" href="#current-status">Current Status</a></h1>
<ul>
<li>
<p>Contractual matters</p>
<ul>
<li>ITT documents published, awaiting evaluation (Mar 2022)</li>
<li>Direct contract awarded to Fujitec cargo lift (Mar +3mths)</li>
<li>AWS GCC cloud service setup</li>
</ul>
</li>
<li>
<p>Site Assessments</p>
<ul>
<li>Cargo lift assessment completed – lift gap considerations, integration with Fujitec</li>
<li>Door assessments completed – Fire safety, security company (Bosch), 3 possible approaches</li>
</ul>
</li>
<li>
<p>Design Efforts / Documentations</p>
<ul>
<li>RMF Safety Instrumented System (SIS)</li>
</ul>
</li>
<li>
<p>Current Developmental efforts</p>
<ul>
<li>RMF hosted on AWS GCC; integrated with Caato</li>
<li>TRL levels 2-6 physically mapped, simulation and standalone scenarios done</li>
<li>Caato 2.0 built, I2R navigation stack installed and working</li>
<li>Network wiring arrangements (by NLB-TRL) underway</li>
</ul>
</li>
<li>
<p>Staging of Component Purchases</p>
<ul>
<li>1x Xnergy briefcase stand, 1set Phoenix Tx Rx Charger</li>
<li>1x Dormakaba automatic door actuators</li>
<li>Parasoft Software QA license purchased</li>
<li>Beckhoff Programable Logic Controllers (PLC) for Lift</li>
<li>Decada Edge (Dell Edge) device purchase</li>
</ul>
</li>
</ul>
<h1 id="virtual-trl-ros-gazebo"><a class="header" href="#virtual-trl-ros-gazebo">Virtual TRL (ROS-Gazebo)</a></h1>
<p><img src="content/../images/gazebo.png" alt="Current Status" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="our-partners-and-contributors"><a class="header" href="#our-partners-and-contributors">Our partners and contributors</a></h1>
<!DOCTYPE html>
<html>
<head>
<style>
* {
  box-sizing: border-box;
}
.row{
    overflow: scroll;
    white-space:nowrap;
    display: flex;
    justify-content:center;
}
<p>.column{
float: left;
width: 33.33%;
padding: 5px;
}</p>
</style>
</head>
<body>
<!--- ![SNDGG](../images/smart-nation-logo.png)-->
<!--- <img src="content/../images/smart-nation-logo.png" width="200"/>-->
<!--- ![GovTech Logo](../images/snt.jpeg)-->
<!--- ![IMDA Logo](../images/imda_logo.jpg)-->
<div class="row">
  <div class="column">
    <img src="content/../images/SNDGO.jpg" alt="Smart Nation Singapore" height="300" width="400" class="column">
  </div>
  <div class="column">
    <img src="content/../images/snt.jpeg" alt="GovTech" height="300" width="400" class="column">
  </div>
  <div class="column">
    <img src="content/../images/imda_logo.jpg" alt="IMDA" height="300" width="400" class="column">
  </div>
</div>
<p><br> <br></p>
<h2 id="project-sponsor--executing-agency"><a class="header" href="#project-sponsor--executing-agency">Project Sponsor &amp; Executing Agency</a></h2>
<p>Mr Chong Teng Sheng  - S&amp;TPPO<br />
Project Sponsor<br />
<a href="mailto:content/chong_teng_sheng@pmo.gov.sg">chong_teng_sheng@pmo.gov.sg</a> </p>
<p>Mr Timothy-Joe Tan - Govtech<br />
Project Lead<br />
<a href="mailto:content/timothy_tan@tech.gov.sg">timothy_tan@tech.gov.sg</a></p>
<p>Mr Abilash Sivalingam<br />
<a href="mailto:content/abilash_sivalingam@tech.gov.sg">abilash_sivalingam@tech.gov.sg</a></p>
<p>Mr Selvavignesh Balasubramanian<br />
<a href="mailto:content/balasubramanian_selvavignesh@tech.gov.sg">balasubramanian_selvavignesh@tech.gov.sg</a> </p>
<h2 id="rmf-overall-systems-integrator--building-management-systems-integrator"><a class="header" href="#rmf-overall-systems-integrator--building-management-systems-integrator">RMF Overall Systems Integrator &amp; Building Management Systems Integrator</a></h2>
<p>Mr Lim Joo Siang - PM, Hope Technik<br />
Overall Systems Integrator Lead &amp; RMF Building Management Systems<br />
<a href="mailto:content/limjoosiang@hopetechnik.com">limjoosiang@hopetechnik.com</a></p>
<h2 id="rmf-core--fleet-systems-integrator"><a class="header" href="#rmf-core--fleet-systems-integrator">RMF Core &amp; Fleet Systems Integrator</a></h2>
<p>Dr Ho Chin Keong - CTO, Senserbot<br />
RMF Core Integrator Lead<br />
<a href="mailto:content/ChinKeong@senserbot.com">ChinKeong@senserbot.com</a></p>
<p><br> <br> 
Mr Matt Festo - PM, OSRF Singapore<br />
<a href="mailto:content/matthew@openrobotics.org">matthew@openrobotics.org</a></p>
<p><br> <br>
Dr Michael Grey - Lead Developer, OSRF Singapore<br />
RMF Scheduler Development Lead<br />
<a href="mailto:content/grey@openrobotics.org">grey@openrobotics.org</a></p>
<h2 id="universal-wireless-charger-systems-integrator"><a class="header" href="#universal-wireless-charger-systems-integrator">Universal Wireless Charger Systems Integrator</a></h2>
<p>Mr Terrenlzze Wong - Xnergy Wireless
Wireless Charger Lead<br />
<a href="mailto:content/twongms@xnergytech.com">twongms@xnergytech.com</a></p>
</body>
</html>			
<div style="break-before: page; page-break-before: always;"></div><h1 id="design-efforts"><a class="header" href="#design-efforts">Design Efforts</a></h1>
<h2 id="design-efforts--document-tree"><a class="header" href="#design-efforts--document-tree">Design Efforts / Document tree</a></h2>
<ul>
<li>RMF BMS Systems Integrator (HT)
<ul>
<li>Lift acceptance test plan - from OEM</li>
<li>Lift PLC + lift acceptance test plan (include fire safety, PLC-UPS design), ICD</li>
<li>Lift PLC to Edge Computer test plan and IRS</li>
<li>Door PLC + Door acceptance test plan (include fire safety, PLC-UPS design)</li>
<li>Door PLC to Edge Computer test plan and IRS</li>
<li>Wireless Charger standardized docking test plan and IRS</li>
</ul>
</li>
<li>Overall RMF integrator (HT + Govtech)
<ul>
<li>Hazards and Risk analysis document, Risk Management Plan
<ul>
<li>Platform Safety</li>
<li>Operational Safety (ie: Fire safety)</li>
</ul>
</li>
<li>Building Wiring ICD</li>
<li>Network HDD and ICD</li>
<li>Overall SSS, Systems design document</li>
<li>Nominal case test plan (AMR vendors, basic 4 scenarios)</li>
<li>Extended test plan (4 scenarios + emergency scenarios, Monte Carlo testing)</li>
<li>Testing and commissioning plan
<ul>
<li>With ROS-Gazebo software in the loop (SwIL), SwTP for verification and validation</li>
<li>On Site Acceptance Test (OSAT)</li>
</ul>
</li>
</ul>
</li>
<li>RMF Core integrator (OSRC + Senserbot)
-RMF core cloud deployment SSS, Systems Design Document
<ul>
<li>RMF to BMS “cloud to cloud” test plan and IRS</li>
<li>Cybersecurity Risk Assessment (IM8, AIAS) &amp; development plan</li>
<li>Software Quality (ie: Parasoft C++) where applicable</li>
</ul>
</li>
<li>Aurora-Caato developer (Senserbot + I2R + Govtech)
<ul>
<li>RMF Nominal + I2R integration requirements</li>
</ul>
</li>
<li>AMR Vendors (Lionsbot? Gaussian..?)
<ul>
<li>RMF Nominal case integration requirements (to be discussed)</li>
</ul>
</li>
</ul>
<!--- ![termin](../images/termin.png)-->
<p align="center">
    <img width="400" height="300" src="headers/../images/termin.png">
</p>
<h2 id="design-efforts--documentation-goals"><a class="header" href="#design-efforts--documentation-goals">Design Efforts / Documentation Goals:</a></h2>
<ul>
<li>Identify updated type &quot;C&quot; requirements (ie: complimentary to ISO-
13482 as an operational standard) covering indoor buildings and
RMF-like system
<ul>
<li>*Complimentary to I2R efforts to update ISO/TC299, ISO/CD 18646-2</li>
</ul>
</li>
</ul>
<!--- ![SS ISO 13482:2017](../images/iso.png)-->
<p align="center">
    <img width="400" height="60" src="headers/../images/iso.png">
</p>
<ul>
<li>Update to IMDA AMR guidelines (ie: Govt Playbook)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roles--responsibilities"><a class="header" href="#roles--responsibilities">Roles &amp; Responsibilities</a></h1>
<p><img src="content/../images/roles.png" alt="Roles &amp; Responsibilities" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="approach-to-development"><a class="header" href="#approach-to-development">Approach to Development</a></h1>
<h2 id="mandatory-developments"><a class="header" href="#mandatory-developments">Mandatory Developments</a></h2>
<h2 id="optional-developments"><a class="header" href="#optional-developments">Optional Developments</a></h2>
<h2 id="rationale"><a class="header" href="#rationale">Rationale</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="identified-hazards"><a class="header" href="#identified-hazards">Identified Hazards</a></h1>
<p><img src="headers/../images/table.png" alt="Identified Hazards" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="terms-of-reference"><a class="header" href="#terms-of-reference">Terms of Reference</a></h1>
<ul>
<li>A <strong>disturbance/error</strong> is an unknown and uncontrolled input acting on a system.</li>
<li>A <strong>fault</strong> is an unpermitted deviation of at least one characteristic property or parameter of the system from
the acceptable/usual/standard operating conditions.</li>
<li>A <strong>failure</strong> is a permanent
interruption of a system’s ability to perform a required function
under specified operating conditions.</li>
<li>Traditional control systems
are designed to return the system to normal operations in the
presence of disturbances but not in the presence of faults or failures.</li>
<li><strong>Fault-tolerant control</strong> (FTC) systems refer to control systems
that have been designed to explicitly account for some class of
specified faults in the closed-loop system. FTC systems must act
in the time between a fault and a system failure.</li>
</ul>
<h3 id="the-nature-of-accidents"><a class="header" href="#the-nature-of-accidents">The Nature of Accidents</a></h3>
<p><img src="content/../images/nature.png" alt="The Nature of Accidents" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="risk-assessment"><a class="header" href="#risk-assessment">Risk Assessment</a></h1>
<h2 id="many-forms-of-functional-safety-iec-61508"><a class="header" href="#many-forms-of-functional-safety-iec-61508">Many forms of Functional Safety (IEC 61508)</a></h2>
<p><img src="headers/../images/arrow.png" alt="Many forms of Functional Safety (IEC 61508)" /></p>
<h2 id="approach-to-risk-assessment--hazards-analysis"><a class="header" href="#approach-to-risk-assessment--hazards-analysis">Approach to Risk Assessment &amp; Hazards Analysis</a></h2>
<ul>
<li>Classifications (Mix of IEC 62304 and IEC 61508 SIL definitions):
<ul>
<li>Class A: No injury or damage to health is possible.</li>
<li>Class B: Injury is possible, but not serious.</li>
<li>Class C: Death or serious injury is possible.</li>
</ul>
</li>
</ul>
<p><img src="headers/../images/approach.png" alt="Approach to Risk Assessment &amp; Hazards Analysis" /></p>
<h2 id="approach-to-software-systems-safety-iso-62304"><a class="header" href="#approach-to-software-systems-safety-iso-62304">Approach to Software Systems Safety (ISO 62304)</a></h2>
<p><img src="headers/../images/approach_soft.png" alt="Approach to Software Systems Safety (ISO 62304)" /></p>
<h1 id="difference-in-class"><a class="header" href="#difference-in-class">Difference in Class</a></h1>
<h3 id="class-b"><a class="header" href="#class-b">Class B</a></h3>
<p><img src="headers/../images/classb.png" alt="Class B" /></p>
<h3 id="vs-class-c-lvl-a-sil-4"><a class="header" href="#vs-class-c-lvl-a-sil-4">VS Class C/ Lvl A/ SIL 4</a></h3>
<p><img src="headers/../images/classc.png" alt="Class C/ Lvl A/ SIL 4" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="platform-standards"><a class="header" href="#platform-standards">Platform standards</a></h1>
<h2 id="overview-of-platform-standards"><a class="header" href="#overview-of-platform-standards">Overview of platform standards</a></h2>
<p><img src="content/../images/plat.png" alt="Overview of platform standards" /></p>
<h2 id="overview-of-operational-standards"><a class="header" href="#overview-of-operational-standards">Overview of operational standards</a></h2>
<p><img src="content/../images/oper.png" alt="Overview of operational standards" /></p>
<h2 id="amr-specific-platform-standards"><a class="header" href="#amr-specific-platform-standards">AMR Specific Platform Standards</a></h2>
<p><img src="content/../images/wut.png" alt="AMR Specific Platform Standards" /></p>
<!--- ![AMR Specific Platform Standards](../images/fig1.png) -->
<p align="center">
    <img width="400" height="300" src="content/../images/fig1.png">
</p><div style="break-before: page; page-break-before: always;"></div><h1 id="platform-standards-1"><a class="header" href="#platform-standards-1">Platform standards</a></h1>
<h2 id="overview-of-platform-standards-1"><a class="header" href="#overview-of-platform-standards-1">Overview of platform standards</a></h2>
<p><img src="content/../images/plat.png" alt="Overview of platform standards" /></p>
<h2 id="overview-of-operational-standards-1"><a class="header" href="#overview-of-operational-standards-1">Overview of operational standards</a></h2>
<p><img src="content/../images/oper.png" alt="Overview of operational standards" /></p>
<h2 id="amr-specific-platform-standards-1"><a class="header" href="#amr-specific-platform-standards-1">AMR Specific Platform Standards</a></h2>
<p><img src="content/../images/wut.png" alt="AMR Specific Platform Standards" /></p>
<!--- ![AMR Specific Platform Standards](../images/fig1.png) -->
<p align="center">
    <img width="400" height="300" src="content/../images/fig1.png">
</p><div style="break-before: page; page-break-before: always;"></div><h1 id="risk-assessment-1"><a class="header" href="#risk-assessment-1">Risk Assessment</a></h1>
<h2 id="many-forms-of-functional-safety-iec-61508-1"><a class="header" href="#many-forms-of-functional-safety-iec-61508-1">Many forms of Functional Safety (IEC 61508)</a></h2>
<p><img src="headers/../images/arrow.png" alt="Many forms of Functional Safety (IEC 61508)" /></p>
<h2 id="approach-to-risk-assessment--hazards-analysis-1"><a class="header" href="#approach-to-risk-assessment--hazards-analysis-1">Approach to Risk Assessment &amp; Hazards Analysis</a></h2>
<ul>
<li>Classifications (Mix of IEC 62304 and IEC 61508 SIL definitions):
<ul>
<li>Class A: No injury or damage to health is possible.</li>
<li>Class B: Injury is possible, but not serious.</li>
<li>Class C: Death or serious injury is possible.</li>
</ul>
</li>
</ul>
<p><img src="headers/../images/approach.png" alt="Approach to Risk Assessment &amp; Hazards Analysis" /></p>
<h2 id="approach-to-software-systems-safety-iso-62304-1"><a class="header" href="#approach-to-software-systems-safety-iso-62304-1">Approach to Software Systems Safety (ISO 62304)</a></h2>
<p><img src="headers/../images/approach_soft.png" alt="Approach to Software Systems Safety (ISO 62304)" /></p>
<h1 id="difference-in-class-1"><a class="header" href="#difference-in-class-1">Difference in Class</a></h1>
<h3 id="class-b-1"><a class="header" href="#class-b-1">Class B</a></h3>
<p><img src="headers/../images/classb.png" alt="Class B" /></p>
<h3 id="vs-class-c-lvl-a-sil-4-1"><a class="header" href="#vs-class-c-lvl-a-sil-4-1">VS Class C/ Lvl A/ SIL 4</a></h3>
<p><img src="headers/../images/classc.png" alt="Class C/ Lvl A/ SIL 4" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="software-quality-assurance"><a class="header" href="#software-quality-assurance">Software Quality Assurance</a></h1>
<h2 id="approach"><a class="header" href="#approach">Approach</a></h2>
<h2 id="commercial-qa-tool"><a class="header" href="#commercial-qa-tool">Commercial QA tool</a></h2>
<p>Parasoft
<img src="headers/../images/parasoft.png" alt="Parasoft" /></p>
<h2 id="many-forms-of-functional-safety-iec-61508-2"><a class="header" href="#many-forms-of-functional-safety-iec-61508-2">Many forms of Functional Safety (IEC 61508)</a></h2>
<p><img src="headers/../images/arrow.png" alt="Many forms of Functional Safety (IEC 61508)" /></p>
<h2 id="approach-to-risk-assessment--hazards-analysis-2"><a class="header" href="#approach-to-risk-assessment--hazards-analysis-2">Approach to Risk Assessment &amp; Hazards Analysis</a></h2>
<ul>
<li>Classifications (Mix of IEC 62304 and IEC 61508 SIL definitions):
<ul>
<li>Class A: No injury or damage to health is possible.</li>
<li>Class B: Injury is possible, but not serious.</li>
<li>Class C: Death or serious injury is possible.</li>
</ul>
</li>
</ul>
<p><img src="headers/../images/approach.png" alt="Approach to Risk Assessment &amp; Hazards Analysis" /></p>
<h2 id="approach-to-software-systems-safety-iso-62304-2"><a class="header" href="#approach-to-software-systems-safety-iso-62304-2">Approach to Software Systems Safety (ISO 62304)</a></h2>
<p><img src="headers/../images/approach_soft.png" alt="Approach to Software Systems Safety (ISO 62304)" /></p>
<h1 id="difference-in-class-2"><a class="header" href="#difference-in-class-2">Difference in Class</a></h1>
<h3 id="class-b-2"><a class="header" href="#class-b-2">Class B</a></h3>
<p><img src="headers/../images/classb.png" alt="Class B" /></p>
<h3 id="vs-class-c-lvl-a-sil-4-2"><a class="header" href="#vs-class-c-lvl-a-sil-4-2">VS Class C/ Lvl A/ SIL 4</a></h3>
<p><img src="headers/../images/classc.png" alt="Class C/ Lvl A/ SIL 4" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="verification-and-verification"><a class="header" href="#verification-and-verification">Verification and Verification</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gazebo-sil-simulation"><a class="header" href="#gazebo-sil-simulation">Gazebo SIL Simulation</a></h1>
<h2 id="rationale-1"><a class="header" href="#rationale-1">Rationale</a></h2>
<p>Having Software-in-the-loop (SIL) testing using simulation allows us to identify bugs and errors in RMF without the need for physical testing. The early detection of problems allows for quick fixes and significantly reduces the development time and cost.</p>
<p>For this project, we are not simulating the entirety of the robot and building. Instead, we are focusing mainly on testing the RMF Scheduler, the backbone to RMF's operations.</p>
<h2 id="objectives"><a class="header" href="#objectives">Objectives</a></h2>
<p>We aim to achieve the following:</p>
<ul>
<li>Verify the capabilities of the RMF Scheduler </li>
<li>Identify the breaking points of the RMF Scheduler</li>
</ul>
<h2 id="methodology"><a class="header" href="#methodology">Methodology</a></h2>
<p>To achieve our objectives, we created 2 groups of test scenarios - basic tests and standalone tests.</p>
<p>Basic tests refer to the core competencies of the RMF scheduler. The testing information and results are available <a href="content/basic-tests.html">here</a>.</p>
<p>Standalone tests refer to the limits and breaking points of the RMF scheduler. The testing information and results are available <a href="content/standalone-tests.html">here</a>.</p>
<p>The documentation is a breakdown of what was presented in <a href="https://docs.google.com/presentation/d/13jBM4jF8lTpDRRpXdSQ906ZPIeMKCdShkHm6D-OAvRY/edit?usp=sharing">this slideshow</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-test-videos"><a class="header" href="#basic-test-videos">Basic Test Videos</a></h1>
<ol>
<li><a href="content/basic-tests.html#introduction">Introduction</a>
<ol>
<li><a href="content/basic-tests.html#basic1">Basic Test 1</a></li>
<li><a href="content/basic-tests.html#basic2">Basic Test 2</a></li>
<li><a href="content/basic-tests.html#basic3">Basic Test 3</a></li>
<li><a href="content/basic-tests.html#basic4">Basic Test 4</a></li>
</ol>
</li>
<li><a href="content/basic-tests.html#summary">Summary of Test Results</a></li>
</ol>
<h2 id="introduction"><a class="header" href="#introduction">Introduction <a name="introduction"></a></a></h2>
<p>Below are a series of tests that verify the capabilities of the RMF scheduler. These tests are being conducted in simulation, using the Tampines Regional Library (TRL) world that was generated using OSRC's Traffic Editor. The relevant files can be found in <a href="https://github.com/TRL-RMF/trl">this repository</a>. 
The results are shown in the videos under each test statement.</p>
<h2 id="basic-test-1--moving-through-lifts-and-doors"><a class="header" href="#basic-test-1--moving-through-lifts-and-doors">Basic Test 1 : Moving through lifts and doors <a name="basic1"></a></a></h2>
<p>The robot is expected to move through lift(s) and door(s) to navigate to its eventual destination. </p>
<video src="https://user-images.githubusercontent.com/54682777/178696368-53193b9f-be59-4b3d-bba7-eac2c2be3fb2.mp4" controls="controls" style="max-width: 730px;">
</video>
<h2 id="basic-test-2--deconflict-ing-robots-through-lift"><a class="header" href="#basic-test-2--deconflict-ing-robots-through-lift">Basic Test 2 : Deconflict-ing robots through lift <a name="basic2"></a></a></h2>
<p>RMF is expected to demonstrate ability to de-conflict navigation plans of 2 robots from different OEMs, both of which are using the lift. </p>
<p><video src="https://user-images.githubusercontent.com/54682777/178697123-48d2bcea-61a3-44c0-8045-ca93de4ace4c.mp4" 
controls="controls" style="max-width: 730px;">
</video></p>
<h2 id="basic-test-3--deconflict-ing-robots-through-door"><a class="header" href="#basic-test-3--deconflict-ing-robots-through-door">Basic Test 3 : Deconflict-ing robots through door <a name="basic3"></a></a></h2>
<p>RMF is expected to demonstrate ability to de-conflict navigation plans of 2 robots from different OEMs, both of which are using the same door.</p>
<video src="https://user-images.githubusercontent.com/54682777/178697144-3eb1b4d6-607d-4d67-bc06-5dea07b3410f.mp4" controls="controls" style="max-width: 730px;">
</video>
<h2 id="basic-test-4--emergency-alarm"><a class="header" href="#basic-test-4--emergency-alarm">Basic Test 4 : Emergency Alarm <a name="basic4"></a></a></h2>
<p>RMF is expected to demonstrate ability to navigate to a safe “parking spot” when the emergency alarm is activated.</p>
<video src="https://user-images.githubusercontent.com/54682777/178697161-52193789-93af-479e-b646-15fd760114ae.mp4" controls="controls" style="max-width: 730px;">
</video>
<h1 id="summary-of-tests--results"><a class="header" href="#summary-of-tests--results">Summary of Tests &amp; Results <a name="summary"></a></a></h1>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center">Integration (Doors)</th><th style="text-align: center">Integration (Lifts)</th><th style="text-align: center">Traffic Deconflicting</th><th style="text-align: center">Emergency Alarm</th><th style="text-align: center">Verified?</th></tr></thead><tbody>
<tr><td style="text-align: center"><strong>Basic Test 1</strong></td><td style="text-align: center">✔️</td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">✅</td></tr>
<tr><td style="text-align: center"><strong>Basic Test 2</strong></td><td style="text-align: center"></td><td style="text-align: center">✔️</td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center">✅</td></tr>
<tr><td style="text-align: center"><strong>Basic Test 3</strong></td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center">✅</td></tr>
<tr><td style="text-align: center"><strong>Basic Test 4</strong></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">✔️</td><td style="text-align: center">❌</td></tr>
</tbody></table>
</div>
<p>As shown in Basic Tests 1-3, it was found that the RMF Scheduler was largely able to fulfil its basic competencies of controlling the lifts and doors, along with active traffic de-conflicting.</p>
<p>In Basic Test 4, RMF shows some problems. When the robot moves along the expected lanes of RMF, it is able to return to the nearest &quot;safe&quot; waypoint during the activation of the emergency alarm. However, if the robot is midway through the bookshelf scanning task, it will not be able to go back to the nearest &quot;safe&quot; waypoint. Hence, we cannot verify that this test has passed.</p>
<p>This problem has already been raised to the main developers (OSRC).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone-test-videos"><a class="header" href="#standalone-test-videos">Standalone Test Videos</a></h1>
<ol>
<li><a href="content/standalone-tests.html#introduction">Introduction</a>
<ol>
<li><a href="content/standalone-tests.html#standalone1">Standalone Test 1</a></li>
<li><a href="content/standalone-tests.html#basic2">Standalone Test 2</a></li>
<li><a href="content/standalone-tests.html#basic3">Standalone Test 3</a></li>
</ol>
</li>
<li><a href="content/standalone-tests.html#summary">Summary of Test Results</a></li>
</ol>
<h2 id="introduction-1"><a class="header" href="#introduction-1">Introduction <a name="introduction"></a></a></h2>
<p>Below are a series of tests that identify the breaking points of the RMF scheduler. The tests were conducted in TRL world, similar to that of <a href="content/basic-tests.html">basic tests</a>. However, the robot lanes in these tests were engineered specifically to find the limits of the RMF scheduler. Hence there will spawning of multiple robots in close proximity which are only for the sake of this stress testing.</p>
<p>These tests were conducted using a <a href="https://github.com/TRL-RMF/trl/blob/main/standalone_tests/standalone_tests.py">script</a> which sends out RMF commands/tasks at pre-defined intervals. </p>
<p>The results are shown in the gifs/videos below.</p>
<h2 id="standalone-test-1--navigation-path-de-conflicting"><a class="header" href="#standalone-test-1--navigation-path-de-conflicting">Standalone Test 1 : Navigation path de-conflicting <a name="standalone1"></a></a></h2>
<p>4 robots are spawned in simulation.
At a predefined time interval (e.g. 30 seconds), 2 of the robots will be commanded to move to each other’s position (dispatch_loop task).</p>
<p>The 2 robots are expected to resolve their paths by using the holding point/making way.
The gif below shows the RMF scheduler working as intended.</p>
<p><img src="content/../images/standalone1_good.gif" alt="standalone test 1" /></p>
<p>However, when too many tasks are being sent too quickly, we observe RMF stalling, being unable to resolve paths (as shown in the red lines on Rviz, indicating a navigation path is unable to be resolved).</p>
<p><img src="content/../images/standalone1_bad.png" alt="standalone test 1" /></p>
<p>Upon investigation, it was found that even when there is a robot1 occupying a destination waypoint of another robot2, the task will still be sent to robot2. Robot2 will still navigate until the very last waypoint before the destination waypoint before realizing that the last (destination) waypoint is occupied by robot1 and there is no way to reach its destination (and hence no way to resolve it's navigation path).</p>
<p>This has been brought up to OSRC and there are currently discussions involving a &quot;reservation system&quot; for waypoints.</p>
<h2 id="standalone-test-2--navigation-path-de-conflicting-with-door"><a class="header" href="#standalone-test-2--navigation-path-de-conflicting-with-door">Standalone Test 2 : Navigation path de-conflicting with door   <a name="standalone2"></a></a></h2>
<p>3 robots are spawned near a door.
At a predefined time interval (e.g. 30 seconds), 2 of the robots will be commanded to move to each other’s position (dispatch_loop task) through the door.
The 2 robots are expected to resolve their paths by using the holding point/making way.
The gif below shows the RMF scheduler working as intended.</p>
<p><img src="content/../images/standalone2_good.gif" alt="standalone test 2" /></p>
<p>What was observed at times, however, was that the robot did not make use of the holding point, and instead used the lift cabin as the holding point while waiting for other robots to pass as shown below.</p>
<p><img src="content/../images/standalone2_bad.gif" alt="standalone test 2" /></p>
<p>This was attributed to a design fault when designing the TRL world in traffic editor. System integrators must take note to mark certain areas as being unable to “hold” robots.</p>
<h2 id="standalone-test-3--navigation-path-de-conflicting-with-lift"><a class="header" href="#standalone-test-3--navigation-path-de-conflicting-with-lift">Standalone Test 3 : Navigation path de-conflicting with lift   <a name="standalone3"></a></a></h2>
<p>5 robots are spawned on each floor, near the lift lobby.
At a predefined time interval (e.g. 30 seconds), 2 of the robots will be commanded to move to each other’s position (dispatch_loop task) using the lift.
The 2 robots are expected to wait for the other to use the lift cabin, as only one robot can occupy it at a time.
The gif below shows the RMF scheduler working as intended.</p>
<p><img src="content/../images/standalone3_good.gif" alt="standalone test 2" /></p>
<p>In the above video, we see the 2nd robot waiting outside the doors for the other robot to take it's place, before entering back into the lift cabin and going down to its destination.</p>
<p>What was observed at times, however, was that the robot does not give way to the other robot leaving the lift as shown below.</p>
<p><img src="content/../images/standalone3_bad.gif" alt="standalone test 2" /></p>
<p>This is similar to standalone test 1, except the problem can also be attributed to the lift. The lift only detects that the lift is empty after the robot has left the lift cabin and reached the first waypoint outside the lift. Hence, RMF stalls because the robot is unable to reach that first waypoint outside the lift and the lift is also unable to move. </p>
<p>This issue has also been raised up to OSRC.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="systems-test-plan"><a class="header" href="#systems-test-plan">Systems Test Plan</a></h1>
<p><img src="headers/../images/system-testplan.png" alt="Systems Test Plan" /></p>
<h2 id="how-to-perform-the-tests"><a class="header" href="#how-to-perform-the-tests">How to perform the tests</a></h2>
<p>HT to do this</p>
<h2 id="download-link"><a class="header" href="#download-link">Download link</a></h2>
<p>Click the link to download the system test plans.
<a href="headers/../download/SysTestPlans.xlsx">Download</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseline-0"><a class="header" href="#baseline-0">Baseline 0</a></h1>
<h2 id="static-test-rig"><a class="header" href="#static-test-rig">Static test rig</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseline-1"><a class="header" href="#baseline-1">Baseline 1</a></h1>
<h2 id="introduction-2"><a class="header" href="#introduction-2">INTRODUCTION</a></h2>
<p>In this baseline, we will be conducting unit testing for each of the following components:</p>
<ul>
<li>RMF (simulation)</li>
<li>Aurorabot Fleet Adapter (Physical)</li>
<li>CAATO Fleet Adapter (Physical)</li>
<li>Fujitec Lift Controller and Adapter (Physical)</li>
<li>Dormakaba Door Controller and Adapter (Physical)</li>
</ul>
<p>For the purpose of this test, we will be using simulation and physical testing of each components ability to meet a set of test requirements before we proceed to baseline 2 testing.W</p>
<h2 id="objectives-and-tasks"><a class="header" href="#objectives-and-tasks">OBJECTIVES AND TASKS</a></h2>
<h3 id="objectives-1"><a class="header" href="#objectives-1">Objectives</a></h3>
<p>The objective of this testing is to ensure that we are able to identify potential issues as well as seek recommended solutions for these problems. We are also expecting to 'tune' the system to achieve a certain level of robustness in handling certain situations, such as receiving changing itineraries or handling conflicts between two robots.</p>
<h3 id="tasks"><a class="header" href="#tasks">Tasks</a></h3>
<p>In general, the tasks will occur in the following sequence:</p>
<ol>
<li>Identify Test Case</li>
<li>Conduct Test with system as-is</li>
<li>Identify any issues (if any)</li>
<li>If any issues, seek remedy and modify system</li>
<li>Repeat Steps 2 - 4 until system is able to pass test case identified.</li>
</ol>
<h2 id="scope"><a class="header" href="#scope">SCOPE</a></h2>
<h3 id="rmf-unit-testing"><a class="header" href="#rmf-unit-testing">RMF Unit Testing</a></h3>
<p>For the purpose of RMF unit testing, we will test using the RMF Gazebo Simulation in ROS2 using the plugin adapters. We will test 4 test cases listed below:</p>
<h4 id="rmf-unit-test-case-1"><a class="header" href="#rmf-unit-test-case-1">RMF Unit Test Case 1</a></h4>
<p>Using the map below, and two tinyRobot plugins, we will test conflicting paths. In this case, the two robots will be sent to perform a loop task from their respective charging points to opposing points (tinyRobot1 goes to cafe_4 and tinyRobot2 goes to big_screen). The detailed test plan is in the TESTING STRATEGY section.</p>
<h4 id="rmf-unit-test-case-2"><a class="header" href="#rmf-unit-test-case-2">RMF Unit Test Case 2</a></h4>
<p>Using the map below, and two tinyRobot plugins, we will test conflicting paths. In this case, the two robots will be sent to perform a loop task from their respective charging points to the same point via the door at lift_landing. The detailed test plan is in the TESTING STRATEGY section.</p>
<h4 id="rmf-unit-test-case-3"><a class="header" href="#rmf-unit-test-case-3">RMF Unit Test Case 3</a></h4>
<p>Using the TRL map, and two tinyRobot plugins, we will test lift coordination. In this case, the two robots will be sent to perform a loop task from their respective charging points to different point via the lift at lift_landing. The detailed test plan is in the TESTING STRATEGY section.</p>
<h4 id="rmf-unit-test-case-4"><a class="header" href="#rmf-unit-test-case-4">RMF Unit Test Case 4</a></h4>
<p>Using the TRL map, and two tinyRobot plugins, we will test fire alarm coordination. In this case, the two robots will be sent to perform a loop task from their respective charging points to different points via the lift at lift_landing. The detailed test plan is in the TESTING STRATEGY section.</p>
<h3 id="aurorabot-and-caato-fleet-adapter-unit-testing"><a class="header" href="#aurorabot-and-caato-fleet-adapter-unit-testing">Aurorabot and CAATO Fleet Adapter Unit Testing</a></h3>
<p>This is the testing scope</p>
<h3 id="door-controller-and-adapter-at-trl-unit-testing"><a class="header" href="#door-controller-and-adapter-at-trl-unit-testing">Door Controller and Adapter at TRL Unit Testing</a></h3>
<p>This is the testing scope</p>
<h3 id="lift-controller-and-adapter-at-trl-unit-testing"><a class="header" href="#lift-controller-and-adapter-at-trl-unit-testing">Lift Controller and Adapter at TRL Unit Testing</a></h3>
<p>This is the testing scope</p>
<h2 id="testing-strategy"><a class="header" href="#testing-strategy">TESTING STRATEGY</a></h2>
<h3 id="rmf-unit-testing-1"><a class="header" href="#rmf-unit-testing-1">RMF Unit Testing</a></h3>
<ol>
<li>Unit Test Case 1 (Robot Deconfliction)</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th>Stage</th><th>Description</th><th>Expected Behaviour</th></tr></thead><tbody>
<tr><td>0</td><td>tinyRobot 1 and 2 at their respective charger points (tinyRobot1_charger and tinyRobot2_charger).</td><td>Robots are waiting at their respective charging points</td></tr>
<tr><td>1</td><td>tinyRobot_1 issued a patrol task to proceed to cafe_4 and then return to tinyRobot1_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot_1 receives navigation requests and proceeds to navigate</td></tr>
<tr><td>2</td><td>Delay 1 second</td><td></td></tr>
<tr><td>3</td><td>tinyRobot_2 issued a patrol task to proceed to big_screen and then return to tinyRobot2_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot fleet adapter deconflicts between the two current robots moving and tinyRobot_2 receives navigation requests and proceeds to navigate  without conflicting with tinyRobot1</td></tr>
<tr><td>4</td><td>Both tinyRobots return to their respective charger</td><td>No conflict occurring between robots, or conflicts able to resolve and robots able to reach charging points</td></tr>
</tbody></table>
</div>
<ol start="2">
<li>Unit Test Case 2 (Door - Robot  Deconfliction)</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th>Stage</th><th>Description</th><th>Expected Behaviour</th></tr></thead><tbody>
<tr><td>0</td><td>tinyRobot 1 and 2 at their respective charger points (tinyRobot1_charger and tinyRobot2_charger).</td><td>Robots are waiting at their respective charging points</td></tr>
<tr><td>1</td><td>tinyRobot_1 issued a patrol task to proceed to lift_waiting_point and then return to tinyRobot1_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot_1 receives navigation requests and proceeds to navigate</td></tr>
<tr><td>2</td><td>Delay 1 second</td><td></td></tr>
<tr><td>3</td><td>tinyRobot_2 issued a patrol task to proceed to lift_waiting_point and then return to tinyRobot2_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot fleet adapter deconflicts between the two current robots moving and tinyRobot_2 receives navigation requests and proceeds to navigate  without conflicting with tinyRobot1</td></tr>
<tr><td>4</td><td>Both tinyRobots return to their respective charger</td><td>No conflict occurring between robots, or conflicts able to resolve and robots able to reach charging points</td></tr>
</tbody></table>
</div>
<ol start="3">
<li>Unit Test Case 3 (Lift - Robot  Deconfliction)</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th>Stage</th><th>Description</th><th>Expected Behaviour</th></tr></thead><tbody>
<tr><td>0</td><td>tinyRobot 1 and 2 at their respective charger points (tinyRobot1_charger on L2 and tinyRobot2_charger on L3).</td><td>Robots are waiting at their respective charging points</td></tr>
<tr><td>1</td><td>tinyRobot_1 issued a patrol task to proceed to L3 and then return to tinyRobot1_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot_1 receives navigation requests and proceeds to navigate</td></tr>
<tr><td>2</td><td>Delay 1 second</td><td></td></tr>
<tr><td>3</td><td>tinyRobot_2 issued a patrol task to proceed to L4 and then return to tinyRobot2_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot fleet adapter deconflicts between the two current robots moving and tinyRobot_2 receives navigation requests and proceeds to navigate  without conflicting with tinyRobot1</td></tr>
<tr><td>4</td><td>Both tinyRobots return to their respective charger</td><td>No conflict occurring between robots, or conflicts able to resolve and robots able to reach charging points</td></tr>
</tbody></table>
</div>
<ol start="3">
<li>Unit Test Case 4 (Fire Alarm)</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th>Stage</th><th>Description</th><th>Expected Behaviour</th></tr></thead><tbody>
<tr><td>0</td><td>tinyRobot 1 and 2 at their respective charger points (tinyRobot1_charger on L2 and tinyRobot2_charger on L3).</td><td>Robots are waiting at their respective charging points</td></tr>
<tr><td>1</td><td>tinyRobot_1 issued a patrol task to proceed to L3 and then return to tinyRobot1_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot_1 receives navigation requests and proceeds to navigate</td></tr>
<tr><td>2</td><td>Delay 1 second</td><td></td></tr>
<tr><td>3</td><td>tinyRobot_2 issued a patrol task to proceed to L4 and then return to tinyRobot2_charger</td><td>tinyRobot fleet adapter submits bid, wins bid and then issues task to navigate to the stated waypoints. tinyRobot fleet adapter deconflicts between the two current robots moving and tinyRobot_2 receives navigation requests and proceeds to navigate  without conflicting with tinyRobot1</td></tr>
<tr><td>4</td><td>Fire alarm is triggered</td><td>Both robots stop and proceed to nearest parking spot</td></tr>
</tbody></table>
</div>
<h3 id="aurorabot-and-caato-fleet-adapter-unit-testing-1"><a class="header" href="#aurorabot-and-caato-fleet-adapter-unit-testing-1">Aurorabot and CAATO Fleet Adapter Unit Testing</a></h3>
<h3 id="door-controller-and-adapter-at-trl-unit-testing-1"><a class="header" href="#door-controller-and-adapter-at-trl-unit-testing-1">Door Controller and Adapter at TRL Unit Testing</a></h3>
<h3 id="lift-controller-and-adapter-at-trl-unit-testing-1"><a class="header" href="#lift-controller-and-adapter-at-trl-unit-testing-1">Lift Controller and Adapter at TRL Unit Testing</a></h3>
<h2 id="equipment-requirements"><a class="header" href="#equipment-requirements">EQUIPMENT REQUIREMENTS</a></h2>
<h3 id="rmf-unit-testing-2"><a class="header" href="#rmf-unit-testing-2">RMF Unit Testing</a></h3>
<ol>
<li>Computer running RMF on Galactic with latest release of RMF and TRL repositories</li>
</ol>
<h3 id="aurorabot-and-caato-fleet-adapter-testing"><a class="header" href="#aurorabot-and-caato-fleet-adapter-testing">Aurorabot and CAATO Fleet Adapter Testing</a></h3>
<ol>
<li>Aurorabot (or CAATO) robot with Client running</li>
<li>RMF Staging Server on AWS GCC Running with RMF-Web displayed</li>
</ol>
<h3 id="door-controller-and-adapter-at-trl-unit-testing-2"><a class="header" href="#door-controller-and-adapter-at-trl-unit-testing-2">Door Controller and Adapter at TRL Unit Testing</a></h3>
<h3 id="lift-controller-and-adapter-at-trl-unit-testing-2"><a class="header" href="#lift-controller-and-adapter-at-trl-unit-testing-2">Lift Controller and Adapter at TRL Unit Testing</a></h3>
<h2 id="test-schedule"><a class="header" href="#test-schedule">TEST SCHEDULE</a></h2>
<h2 id="control-procedures"><a class="header" href="#control-procedures">CONTROL PROCEDURES</a></h2>
<h2 id="features-to-be-tested"><a class="header" href="#features-to-be-tested">FEATURES TO BE TESTED</a></h2>
<h2 id="features-not-to-be-tested"><a class="header" href="#features-not-to-be-tested">FEATURES NOT TO BE TESTED</a></h2>
<p>RESOURCES/ROLES &amp; RESPONSIBILITIES</p>
<h2 id="resourcesroles--responsibilities"><a class="header" href="#resourcesroles--responsibilities">RESOURCES/ROLES &amp; RESPONSIBILITIES</a></h2>
<h2 id="schedules"><a class="header" href="#schedules">SCHEDULES</a></h2>
<h2 id="risksassumptions"><a class="header" href="#risksassumptions">RISKS/ASSUMPTIONS</a></h2>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_1_lane_deconflict.gif" alt="" /></p>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_1_lane_with_big_screen_holding_point.gif" alt="" /></p>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_1_lane_with_passthrough_points_2.gif" alt="" /></p>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_1_lane_with_passthrough_points_3.gif" alt="" /></p>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_1_lane_with_passthrough_points_fail.gif" alt="" /></p>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_1_lane_with_passthrough_points.gif" alt="" /></p>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_multilane_deconflict.gif" alt="" /></p>
<p><img src="https://rmf-systems-engineering-handbook.s3.ap-southeast-1.amazonaws.com/baseline-1/MBC_sim_multulane_deconflict_2.gif" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseline-2"><a class="header" href="#baseline-2">Baseline 2</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="final-baseline"><a class="header" href="#final-baseline">Final Baseline</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseline-0-1"><a class="header" href="#baseline-0-1">Baseline 0</a></h1>
<h2 id="static-test-rig-1"><a class="header" href="#static-test-rig-1">Static test rig</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design-documents"><a class="header" href="#design-documents">Design Documents</a></h1>
<h2 id="rmf-bms-integrator"><a class="header" href="#rmf-bms-integrator">RMF-BMS Integrator</a></h2>
<h2 id="rmf-core-cloud-integrator"><a class="header" href="#rmf-core-cloud-integrator">RMF-Core (Cloud) Integrator</a></h2>
<h2 id="rmf-amr-fleet-integrator"><a class="header" href="#rmf-amr-fleet-integrator">RMF-AMR Fleet Integrator</a></h2>
<h2 id="overall-systems-integrator"><a class="header" href="#overall-systems-integrator">Overall Systems Integrator</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="amr-to-people-interactions"><a class="header" href="#amr-to-people-interactions">AMR to People Interactions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="amr-to-building-interactions"><a class="header" href="#amr-to-building-interactions">AMR to Building Interactions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lift-integration"><a class="header" href="#lift-integration">Lift Integration</a></h1>
<h2 id="fujitec"><a class="header" href="#fujitec">Fujitec</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="door-integration"><a class="header" href="#door-integration">Door Integration</a></h1>
<h2 id="dormakaba"><a class="header" href="#dormakaba">Dormakaba</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rmf-traffic-editor"><a class="header" href="#rmf-traffic-editor">RMF Traffic Editor</a></h1>
<ol>
<li><a href="content/mapping.html#use">How we used Traffic Editor</a>
<ol>
<li><a href="content/mapping.html#intro">Introduction &amp; Installation</a>
<ol>
<li><a href="content/mapping.html#rmf_install">Installation with RMF</a></li>
<li><a href="content/mapping.html#independent_install">Independent Installation</a></li>
</ol>
</li>
<li><a href="content/mapping.html#GUI">Using Traffic Editor GUI</a>
<ol>
<li><a href="content/mapping.html#step1">Step 1: Naming your building</a></li>
<li><a href="content/mapping.html#step2">Step 2: Adding Floorplans</a></li>
<li><a href="content/mapping.html#step3">Step 3: Adding Robot Generated Map</a></li>
<li><a href="content/mapping.html#step4">Step 4: Map Alignment</a></li>
<li><a href="content/mapping.html#step5">Step 5: Adding Walls &amp; Flooring</a></li>
<li><a href="content/mapping.html#step6">Step 6: Adding Interior Walls &amp; Doors</a></li>
<li><a href="content/mapping.html#step7">Step 7: Adding Measurements</a></li>
<li><a href="content/mapping.html#step8">Step 8: Adding Robot Lanes</a></li>
<li><a href="content/mapping.html#step9">Step 9: Robots for Simulation</a></li>
<li><a href="content/mapping.html#step10">Step 10: Level Alignment</a></li>
<li><a href="content/mapping.html#step11">Step 11: Add Lift</a> </li>
</ol>
</li>
<li><a href="content/mapping.html#oops">Tips, Errors and Mistakes</a></li>
</ol>
</li>
</ol>
<h2 id="how-we-used-it"><a class="header" href="#how-we-used-it">How we used it! <a name="use"></a></a></h2>
<p>FYI: Traffic Editor is well documented with instructions on <a href="https://github.com/open-rmf/rmf_traffic_editor#installation">installation</a> and <a href="https://osrf.github.io/ros2multirobotbook/traffic-editor.html">usage</a>. The documentation below highlights how we used Traffic Editor during this project. Think of this page as the user's perspective 😊.</p>
<h3 id="introduction--installation"><a class="header" href="#introduction--installation">Introduction &amp; Installation <a name="intro"></a></a></h3>
<p><a href="https://github.com/open-rmf/rmf_traffic_editor">RMF Traffic Editor</a> is a repository containing a set of ROS2 packages that enable you to use a GUI to annotate floorplans to create traffic patterns (<code>rmf_traffic_editor</code> package) and convert this to a simulation world (<code>rmf_building_map_tools</code> package). </p>
<h4 id="installation-with-rmf"><a class="header" href="#installation-with-rmf">Installation with RMF <a name="rmf_install"></a></a></h4>
<p>If you have already installed RMF based on the <a href="https://github.com/open-rmf/rmf#building-from-sources">installation instructions</a>, you'll find that it is already included in the <code>rmf.repos</code> <a href="https://github.com/open-rmf/rmf/blob/main/rmf.repos?#L50-L53">file</a> and so it should already be in your <code>rmf_ws</code> folder. </p>
<h4 id="independent-installation"><a class="header" href="#independent-installation">Independent Installation <a name="independent_install"></a></a></h4>
<p>The beauty of Traffic Editor is that the generated <code>.world</code> files are able to be used in simulation even without RMF. So perhaps you would like to just test out how Traffic Editor is like - you can are able to do a separate installation by cloning the repository, installing the dependencies and building the packages. </p>
<pre><code class="language-bash"># making your workspace
mkdir -p ~/rmf_traffic_editor_ws/src
cd ~/rmf_traffic_editor_ws/src

# cloning the repo
git clone https://github.com/open-rmf/rmf_traffic_editor.git
# rmf_traffic_editors depends on rmf_utils for building
git clone https://github.com/open-rmf/rmf_utils.git 

# rmf_traffic_editor dependencies
sudo apt install python3-shapely python3-yaml python3-requests
source /opt/ros/galactic/setup.bash

cd ~/rmf_traffic_editor_ws
colcon build
</code></pre>
<h3 id="using-traffic-editor-gui"><a class="header" href="#using-traffic-editor-gui">Using Traffic Editor GUI <a name="GUI"></a></a></h3>
<p>Now that you have the relevant repositories installed, source your workspace and let's get started!</p>
<pre><code class="language-bash"># for full RMF installations
source ~/rmf_ws/install/setup.bash 
traffic-editor
</code></pre>
<p>or</p>
<pre><code class="language-bash"># for full independent installations
source ~/rmf_traffic_editor_ws/install/setup.bash
traffic-editor
</code></pre>
<h4 id="step-1-naming-your-building"><a class="header" href="#step-1-naming-your-building">Step 1: Naming your Building <a name="step1"></a></a></h4>
<p>To start, you'll first name your <code>building.yaml</code> file. In the video, I saved it under the <code>src</code> folder in my workspace, but you can save it wherever you want.</p>
<p>Traffic Editor supports Geographic Coordinates and Reference-Map Coordinates. This feature was created after our creation of <a href="https://github.com/TRL-RMF/trl/tree/main/trl_demos_maps/maps/trl">TRL</a>, hence we were using the older Reference-Map Coordinate System in the video. Moving forward, it is encouraged to use the Geographic Coordinate system to avoid conflict for multiple levels.</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432387-9a185b30-a2cc-4340-b609-cf0fd3dd2170.mp4" 
controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-2-adding-floorplans"><a class="header" href="#step-2-adding-floorplans">Step 2: Adding Floorplans <a name="step2"></a></a></h4>
<p>In this step, we start building our level by adding a <code>png</code> file of our floorplan. To follow this example, you may use the same files used in the video found in <a href="https://github.com/TRL-RMF/trl/tree/main/trl_demos_maps/maps/trl">this repository</a>. For now, we're adding the floorplan of Level 2 of Tampines Regional Library (that's the lowest floor!).</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432397-6f644985-1861-4897-9c21-75a5294dad14.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-3-adding-robot-generated-map"><a class="header" href="#step-3-adding-robot-generated-map">Step 3: Adding Robot Generated Map <a name="step3"></a></a></h4>
<p>Now even though we have a floorplan of the building, we may still be missing some real-life features that do not show up on the floorplan. Hence, we will be adding an additional layer - the Robot Generated Map. This will help reveal extra obstacles such as bookshelves and false walls.</p>
<p>This robot map was generated by CAATO2's 2D LIDARs which produced a <code>pgm</code> and <code>yaml</code> file. The <code>pgm</code> file was converted to <code>png</code> to import into RMF Traffic Editor.</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432440-64dcf944-2ae2-49f5-a807-32c9a14908b6.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-4-map-alignment"><a class="header" href="#step-4-map-alignment">Step 4: Map Alignment  <a name="step4"></a></a></h4>
<p>Now that we have 2 maps, we need to align them. The robot_map (in red) as shown in the video, is terribly oversized and needs to be scaled down. We first attempt to manually align the 2 maps such that we're able to roughly identify key features of both maps.</p>
<p>Once done, we're able to &quot;add features&quot; on each of the layers. The idea behind this is that by identifying similar features on both layers, we'll be able to use these points to align the 2 layers automatically.</p>
<blockquote>
<p>❗️Make sure you select the layer before placing the feature. Notice how I place all the features on the robot_map layer before switching to the Floorplan layer and place the features for the Floorplan layer! You should have at least 3 pairs of features.</p>
</blockquote>
<p>Once you're done, you may then draw &quot;rubberbands&quot; to link up the similar features. Once you're done, you can &quot;Optimise Layer Transforms&quot; and you'll see the magic happen!</p>
<p>(p.s. thanks so much for making &amp; explaining this feature Morgan 😁 !)</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432458-22c0275d-7a07-4269-854c-01beca9e0ae7.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-5-adding-walls--flooring"><a class="header" href="#step-5-adding-walls--flooring">Step 5: Adding Walls &amp; Flooring  <a name="step5"></a></a></h4>
<p>Let's start making our world! Use the blue line tool and trace the parts of the floorplan with walls. Once you're done, you can right-click to end your line.</p>
<blockquote>
<p>ℹ️ You are able to adjust the height of the walls under &quot;Properties&quot; on the bottom right when you select them</p>
</blockquote>
<p>After that, you may use the flooring tool by tracing the same vertexes you used to create the walls!</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433109-383fa93e-9460-4eef-80db-a55d48f678f7.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-6-adding-interior-walls--doors"><a class="header" href="#step-6-adding-interior-walls--doors">Step 6: Adding Interior Walls &amp; Doors  <a name="step6"></a></a></h4>
<p>Buildings aren't just made of exterior walls! Don't forget to add in walls within the building.</p>
<p>When adding doors, don't forget to rename the door name for future reference. </p>
<blockquote>
<p>ℹ️ Use a naming convention to be tidy. At TRL, we named our doors <code>&lt;description&gt;&lt;number&gt;_&lt;floor&gt;_door</code> </p>
</blockquote>
<p>At TRL, there are mainly 2 types of doors: double_hinged and double_sliding. Play around with the other properties to get it to the orientation you need.</p>
<p>You can refer to the <a href="https://osrf.github.io/ros2multirobotbook/traffic-editor.html">Official Traffic Editor Documentation</a> for more info the types of doors available. </p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433130-e996e6fd-8194-420e-94b4-3aa943ecf2c4.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-7-adding-measurements"><a class="header" href="#step-7-adding-measurements">Step 7: Adding Measurements <a name="step7"></a></a></h4>
<p>So far during our creation of this world, we have yet to define the measurements for the floorplan. Hence, we can use the measurement tool to add to our file. Be sure to add multiple measurements to get an accurate scaling.</p>
<blockquote>
<p>Admittedly, this step should be done earlier but it's ok if it's done at this stage as well.</p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433151-15ff6cb5-397d-4dd5-93e7-c8c6f3ad1e94.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-8-adding-robot-lanes"><a class="header" href="#step-8-adding-robot-lanes">Step 8: Adding Robot Lanes <a name="step8"></a></a></h4>
<p>This step is very important! You are now determining where the robot is able to traverse on. The video simply demonstrates how to add lanes and name certain waypoints.</p>
<blockquote>
<p>ℹ️ Load up <a href="https://github.com/TRL-RMF/trl/blob/main/trl_demos_maps/maps/trl/trl.building.yaml"><code>trl.building.yaml</code></a> to see how we did our robot lanes! </p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433169-d7a65012-ddd4-417c-bf59-03eaa3504a03.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-9-robots-for-simulation"><a class="header" href="#step-9-robots-for-simulation">Step 9: Robots for Simulation <a name="step9"></a></a></h4>
<p>For this project, we tested much of RMF in simulation. Thus, this is technically an optional step for real-life robots.</p>
<p>In order to spawn a robot in simulation, we need to define the properties as shown in the video. You may find a better explanation on the <a href="https://osrf.github.io/ros2multirobotbook/traffic-editor.html">official documentation</a> but for our use-case, we followed closely to the examples in the <code>rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/tree/main/rmf_demos_maps/maps/airport_terminal">repository</a>. </p>
<blockquote>
<p>❗️Make sure you take note of your spelling and capitalization in the <code>spawn_robot_name</code> and <code>spawn_robot_type</code> properties! They are quite specific so they are possible points of error.</p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433289-ed4977bf-49f4-4b33-b2ff-9485edf9de0a.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-10-level-alignment"><a class="header" href="#step-10-level-alignment">Step 10: Level Alignment <a name="step10"></a></a></h4>
<p>Before long, you'll find yourself having multiple floors of different floorplans. The question then is, how do you align these different floors?</p>
<p>In the video, we use the Level Alignment Fiducial tool. </p>
<blockquote>
<p>ℹ️ Use features that are 100% aligned on every floor such as lift cabins and escalators!</p>
</blockquote>
<p>Similar to the other alignment tools, be sure to use more than 2 points to ensure accuracy.</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433301-874614d8-48cd-4594-bb41-f3dca4cac0d2.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-11-add-lift"><a class="header" href="#step-11-add-lift">Step 11: Add Lift <a name="step11"></a></a></h4>
<p>Lastly, it's time for us to add the lifts.</p>
<p>After filling the details as shown in the video, align the lift cabin to the proper position on the map.</p>
<blockquote>
<p>❗️Make sure the lift cabin does not touch the walls of the building </p>
</blockquote>
<blockquote>
<p>❗️Be sure to add lift waypoints to enable the robot lanes to join between levels</p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433312-4b246f1a-4fdd-4e23-9868-bbd56258f4c2.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h3 id="tips-errors-and-mistakes"><a class="header" href="#tips-errors-and-mistakes">Tips, Errors and Mistakes <a name="oops"></a></a></h3>
<p>❗️Always always always SAVE your work! (ctrl-s)</p>
<p>If Traffic Editor crashes, or if you close the terminal running traffic-editor without saving, your hard work will be lost! 😭</p>
<p>❗️Read the <code>building.yaml</code> file!</p>
<p>Also, note that Traffic Editor is after all simply a GUI. All your changes are actually added to the <code>building.yaml</code> file. Take a look at it and try to understand it's structure. At times, this will allow you to make more precise changes faster instead of relying heavily on the GUI!</p>
<p><img src="content/../images/building_yaml.gif" alt="building_yaml" /></p>
<h2 id="mapping--traffic-editor-concerns"><a class="header" href="#mapping--traffic-editor-concerns">Mapping &amp; Traffic Editor Concerns</a></h2>
<p>Traffic Editor is not perfect and can be buggy at times. The key is not to rely on the GUI but to understand the <code>building.yaml</code> file deeply and reading up the official documentation.</p>
<h2 id="interoperability-considerations-across-multiple-fleets"><a class="header" href="#interoperability-considerations-across-multiple-fleets">Interoperability considerations (across multiple fleets)</a></h2>
<p>It is vital to create the world with precision. The system integrator but recognize that not just a single type of robot will be relying on this RMF traffic plan. Robots come in different shapes and sizes and may navigate very differently, hence all these must be taken into consideration when creating the traffic plan.</p>
<blockquote>
<p>e.g. the robot lanes must be decided with all stakeholders to make sure that the robot will not perform unexpected behaviors such as entering restricted areas</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseline-0-2"><a class="header" href="#baseline-0-2">Baseline 0</a></h1>
<h2 id="static-test-rig-2"><a class="header" href="#static-test-rig-2">Static test rig</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="emergency-requirements--behaviors"><a class="header" href="#emergency-requirements--behaviors">Emergency Requirements &amp; Behaviors</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="safety-instrumented-system-sis"><a class="header" href="#safety-instrumented-system-sis">Safety Instrumented System (SIS)</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wireless-charger"><a class="header" href="#wireless-charger">Wireless Charger</a></h1>
<h2 id="recommended-integration-to-amr"><a class="header" href="#recommended-integration-to-amr">Recommended integration to AMR</a></h2>
<h3 id="mechanical-placement-considerations-eddy-currents-31cm-from-ground"><a class="header" href="#mechanical-placement-considerations-eddy-currents-31cm-from-ground">Mechanical placement considerations (Eddy currents, ~31cm from ground)</a></h3>
<h3 id="electrical--electronic"><a class="header" href="#electrical--electronic">Electrical &amp; Electronic</a></h3>
<h3 id="software"><a class="header" href="#software">Software</a></h3>
<h3 id="functional-check"><a class="header" href="#functional-check">Functional Check</a></h3>
<h2 id="docking-approaches-fiducial-markers-lidar-reflective-markers"><a class="header" href="#docking-approaches-fiducial-markers-lidar-reflective-markers">Docking approaches (fiducial markers, lidar, reflective markers)</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ethernet-wiring-diagram-at-trl"><a class="header" href="#ethernet-wiring-diagram-at-trl">Ethernet wiring diagram at TRL</a></h1>
<p><img src="content/../images/wiring.png" alt="Ethernet wiring diagram at TRL" /></p>
<h2 id="wiring-requiurements"><a class="header" href="#wiring-requiurements">Wiring Requiurements</a></h2>
<ul>
<li>Lvl B1 – x1 Eth Port (no auto doors, 1 for spare)</li>
<li>Lvl 2-5 – x2 Eth Port each (1 for door, 1 for spare)</li>
<li>Lvl 6 – x4 Eth Port (1 for door, 1 for spare) </li>
<li>(Lift PLC to have x2 lan cables for redundancy)</li>
</ul>
<p>Wireless charger to deploy at level 4 and 6</p>
<h3 id="level-6"><a class="header" href="#level-6">Level 6</a></h3>
<p><img src="content/../images/l6.png" alt="Level 6" /></p>
<h3 id="level-4"><a class="header" href="#level-4">Level 4</a></h3>
<p><img src="content/../images/l4.png" alt="Level 4" /></p>
<h3 id="trunking-switch-to-server-room"><a class="header" href="#trunking-switch-to-server-room">Trunking switch to Server room</a></h3>
<p><img src="content/../images/trunking.png" alt="Trunking switch to Server room" /></p>
<h3 id="server-room"><a class="header" href="#server-room">Server room</a></h3>
<p><img src="content/../images/server.png" alt="Server room" /></p>
<h2 id="download-link-1"><a class="header" href="#download-link-1">Download link</a></h2>
<p>Click the link to download the Ethernet Wiring Diagram.
<a href="content/../download/Wiring.pptx">Download</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parasoft-setup-of-rmf"><a class="header" href="#parasoft-setup-of-rmf">Parasoft Setup (of RMF)</a></h1>
<p>In this section, we will go through an example of configuring the <a href="https://github.com/open-rmf/rmf_utils">rmf_utils</a> package to be suitable
for running Parasoft tests on it.</p>
<h2 id="setting-up-parasoft"><a class="header" href="#setting-up-parasoft">Setting Up Parasoft</a></h2>
<p>As our current license is only supported on one local machine, the Machine ID has to be fixed to a
non-floating one each time a new Parasoft session is being started.
Fix the machine ID with the following command:</p>
<blockquote>
<p>export PARASOFT_SUPPORT_NET_INTERFACES=enp5s0</p>
</blockquote>
<p>Now that the Machine ID is a non-floating one, we can now run the Parasoft software with:</p>
<blockquote>
<p>&lt;PARASOFT_INSTALL_DIR&gt;/cpptest</p>
</blockquote>
<h2 id="configuring-rmf_utils-project"><a class="header" href="#configuring-rmf_utils-project">Configuring rmf_utils Project</a></h2>
<p>To import existing projects on Parasoft to run testings, we need to perform the following actions:</p>
<ul>
<li>Add the Parasoft cmake folder into rmf_utils project structure</li>
<li>Add configuration lines into the main CMakeList.txt</li>
<li>Build the rmf_utils project</li>
</ul>
<h2 id="add-parasoft-cmake-folder"><a class="header" href="#add-parasoft-cmake-folder">Add Parasoft Cmake Folder</a></h2>
<p>From /$PARASOFT_INSTALL_DIR/integration/cmake directory, copy the entire Parasoft cmake
folder into rmf_utils project structure.</p>
<p><img src="content/../images/parasoft.1.png" alt="Parasoft1" /></p>
<p>This cmake folder consists of &quot;cpptest.templates&quot;, &quot;cpptest-coverage.cmake&quot; and &quot;cpptestproject.cmake&quot;.</p>
<p><img src="content/../images/parasoft.2.png" alt="Parasoft2" /></p>
<p>The entire Parasoft cmake folder is now added into rmf_utils project structure.</p>
<p><img src="content/../images/parasoft.3.png" alt="Parasoft3" /></p>
<h2 id="add-configuration-lines-into-main-cmakelisttxt"><a class="header" href="#add-configuration-lines-into-main-cmakelisttxt">Add Configuration Lines into Main CMakeList.txt:</a></h2>
<p>To enable the cmake folder with Parasoft C/C++test related extension functions, we need to add the
following line:</p>
<blockquote>
<p>include(cmake/cpptest-project.cmake)</p>
</blockquote>
<p>We will need to define a target to represent the C/C++test project for rmf_utils, by adding<br />
cpptest_add_executable() function and other required build options and dependencies:</p>
<pre><code>cpptest_add_executable(
rmf_utils_testing              # name of C/C++test project name (to be modified)
CPPTEST_COMPILER_ID gcc_9-64   # compiler name
TARGETS mf_utils               # target name (to be modified)
)

# link C/C++test project name to target name
target_link_libraries(rmf_utils_testing PRIVATE rmf_utils)		
</code></pre>
<h2 id="build-rmf_utils-project"><a class="header" href="#build-rmf_utils-project">Build rmf_utils Project:</a></h2>
<p>Now that the target is defined with build options and dependencies, we can now configure and build
to generate C/C++test project configuration files for rmf_utils. This allows us to import rmf_utils as
an Eclipse project in Parasoft. This is done by the following commands:</p>
<pre><code>cd &lt;RMF_UTILS_DIRECTORY&gt;
mkdir build
cd build
cmake -DCPPTEST_PROJECT=ON ..
make
</code></pre>
<h2 id="importing-rmf_utils-projects"><a class="header" href="#importing-rmf_utils-projects">Importing rmf_utils Projects</a></h2>
<p>After configuring the project, we can now proceed to import it into Parasoft. On the Parasoft
window, navigate to the following tab:</p>
<blockquote>
<p>File &gt; Import &gt; General &gt; Existing Projects into Workspace</p>
</blockquote>
<p>Select &quot;root directory&quot; to be the main folder, and browse for the rmf_utils project.
Under Options subcategory, select &quot;search for nested projects&quot; checkbox. A list of C/C++test
project names would be listed according to the rmf_utils project.
Select the corresponding C/C++test project name, rmf_utils_testing in this tutorial, configured in
the cpptest_add_executable() previously.
Lastly, click Finish to import rmf_utils project.</p>
<p><img src="content/../images/parasoft.4.png" alt="Parasoft4" /></p>
<h2 id="running-the-parasoft-test"><a class="header" href="#running-the-parasoft-test">Running the Parasoft Test</a></h2>
<p>Now that we have imported rmf_utils successfully into Parasoft, we can now run tests according to
our preferred rules and standards.
Select the imported project, rmf_utils_testing, on the left panel. Click on the blue Run Tests button
to test the project using the default &quot;Recommended Rules&quot; standard.</p>
<p><img src="content/../images/parasoft.5.png" alt="Parasoft5" /></p>
<p>We can choose other standards to run the test, by clicking on the arrow beside the blue Run Tests button.
Customization can be done as well by navigating to the following tab:</p>
<blockquote>
<p>Parasoft &gt; Test Configurations</p>
</blockquote>
<p>Select the desired rule category &gt; Static.
Select or deselect rules to customize.
Click Apply to save changes.</p>
<p><img src="content/../images/parasoft.6.png" alt="Parasoft6" /></p>
<p>The sample html parasoft report pf the <a href="https://github.com/open-rmf/rmf_utils">rmf_utils</a> package can be accessed 
in the <a href="content/./parasoft-outputs.html">Parasoft Outputs</a> section of this handbook</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parasoft-outputs-of-rmf-modules"><a class="header" href="#parasoft-outputs-of-rmf-modules">Parasoft Outputs (of RMF Modules)</a></h1>
<p>The modules reports here are culled from the <a href="https://github.com/osrf/rmf_core">rmf_core</a> repositories.
Current outputs are the static test reports from our commercial QA tool of choice (Parasoft). 
Unit testing and code coverage reports to follow in the coming months</p>
<p>See <a href="content/./software-qa.html">Approach to Software Quality Assurance</a><br />
As a guideline, modules that are intended for in operational runtime, should be written in</p>
<ul>
<li>C/C++ and </li>
<li>Subject to the static, unit and code coverage tests, for hygeine purposes</li>
</ul>
<h1 id="mandatory-screened-1st-july-2022"><a class="header" href="#mandatory-screened-1st-july-2022">Mandatory Screened (1st July 2022)</a></h1>
<h2 id="rmf-task"><a class="header" href="#rmf-task"><a href="https://github.com/open-rmf/rmf_task">RMF Task</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_task_testing/rmf_task_testing_detailedRreport.html">rmf_task_testing_detailedRreport.html</a><br />
<a href="content/../parasoft_reports/rmf_task_testing/rmf_task_testing_summaryRreport.html">rmf_task_testing_summaryRreport.html</a></p>
<h2 id="rmf-task-ros2"><a class="header" href="#rmf-task-ros2">RMF Task ROS2</a></h2>
<p><a href="content/../parasoft_reports/rmf_task_ros2_testing/rmf_task_ros2_testing_detailedReport.html">rmf_task_ros2_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_task_ros2_testing/rmf_task_ros2_testing_summaryReport.html">rmf_task_ros2_testing_summaryReport.html</a></p>
<h2 id="rmf-traffic"><a class="header" href="#rmf-traffic"><a href="https://github.com/open-rmf/rmf_traffic">RMF Traffic</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_traffic_testing/rmf_traffic_testing_detailedRreport.html">rmf_traffic_testing_detailedRreport.html</a><br />
<a href="content/../parasoft_reports/rmf_traffic_testing/rmf_traffic_testing_summaryRreport.html">rmf_traffic_testing_summaryRreport.html</a></p>
<h2 id="rmf-utils"><a class="header" href="#rmf-utils"><a href="https://github.com/open-rmf/rmf_utils">RMF Utils</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_utils_testing/rmf_utils_testing_detailedRreport.html">rmf_utils_testing_detailedRreport.html</a><br />
<a href="content/../parasoft_reports/rmf_utils_testing/rmf_utils_testing_summaryRreport.html">rmf_utils_testing_summaryRreport.html</a> </p>
<h2 id="rmf-fleet-adapter"><a class="header" href="#rmf-fleet-adapter">RMF Fleet Adapter</a></h2>
<p><a href="content/../parasoft_reports/rmf_fleet_adapter_testing/rmf_fleet_adapter_testing_detailedReport.html">rmf_fleet_adapter_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_fleet_adapter_testing/rmf_fleet_adapter_testing_summaryReport.html">rmf_fleet_adapter_testing_summaryReport.html</a> </p>
<p><br> <br> <br></p>
<h1 id="optionally-screened-modules-1st-july-2022"><a class="header" href="#optionally-screened-modules-1st-july-2022">Optionally Screened Modules (1st July 2022)</a></h1>
<h2 id="rmf-battery"><a class="header" href="#rmf-battery">RMF <a href="https://github.com/open-rmf/rmf_battery">Battery</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_battery_testing/rmf_battery_testing_detailedReport.html">rmf_battery_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_battery_testing/rmf_battery_testing_summaryReport.html">rmf_battery_testing_summaryReport.html</a></p>
<h2 id="rmf-building-sim-utils"><a class="header" href="#rmf-building-sim-utils">RMF Building Sim Utils</a></h2>
<p><a href="content/../parasoft_reports/rmf_building_sim_utils_testing/rmf_building_sim_utils_testing_detailedReport.html">rmf_building_sim_utils_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_building_sim_utils_testing/rmf_building_sim_utils_testing_summaryReport.html">rmf_building_sim_utils_testing_summaryReport.html</a></p>
<h2 id="rmf-robot-sim-utils"><a class="header" href="#rmf-robot-sim-utils">RMF Robot Sim Utils</a></h2>
<p><a href="content/../parasoft_reports/rmf_robot_sim_utils_testing/rmf_robot_sim_utils_testing_detailedReport.html">rmf_robot_sim_utils_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_robot_sim_utils_testing/rmf_robot_sim_utils_testing_summaryReport.html">rmf_robot_sim_utils_testing_summaryReport.html</a></p>
<h2 id="rmf-visualization-rviz2-plugins"><a class="header" href="#rmf-visualization-rviz2-plugins">RMF Visualization Rviz2 Plugins</a></h2>
<p><a href="content/../parasoft_reports/rmf_visualization_rviz2_plugins_testing/rmf_visualization_rviz2_plugins_testing_detailedReport.html">rmf_visualization_rviz2_plugins_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_visualization_rviz2_plugins_testing/rmf_visualization_rviz2_plugins_testing_summaryReport.html">rmf_visualization_rviz2_plugins_testing_summaryReport.html</a></p>
<h2 id="rmf-visualization-schedule"><a class="header" href="#rmf-visualization-schedule">RMF Visualization Schedule</a></h2>
<p><a href="content/../parasoft_reports/rmf_visualization_schedule_testing/rmf_visualization_schedule_testing_detailedReport.html">rmf_visualization_schedule_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_visualization_schedule_testing/rmf_visualization_schedule_testing_summaryReport.html">rmf_visualization_schedule_testing_summaryReport.html</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="faq"><a class="header" href="#faq">FAQ</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
